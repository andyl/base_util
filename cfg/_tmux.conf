# Ansible Managed by aleak@soak - Do Not Edit!
# /home/aleak/g/x-ansible/roles/tmux/templates/tmux.conf
#
# TMUX CONFIG CHEAT SHEET
#
# `t - create tab
# `1 - move to tab 1
# `2 - move to tab 2
# `N - move to tab <N>
#
# `s - split horizontal
# `v - split vertical
#
# shift-UP    - resize pane up
# shift-DOWN  - resize pane down
# shift-LEFT  - resize pane left
# shift-RIGHT - resize pane right
#
# `<space> - alter pane layout
# `z       - zoom pane
#
# `x - delete tab
# `d - detach from session
# `X - delete session
#
# TMUX COPY/PASTE CHEAT SHEET
#
# `[ - enter copy mode
#  g - top of buffer 
#  G - bottom of buffer 
#  / - search forward
#  n - next search item
#  v - begin visual highlight
#  y - yank to tmux buffer
#
#  V - toggle line / rectangle mode
#  Y - copy to end of line
#
# `p - paste from tmux buffer
#
# `C-p - paste from X11 buffer
# `C-v - save tmux buffer to X11 buffer
#
# `# - list all tmux buffers
# `- - delete the most recently copied buffer
# `= - choose which buffer to paste
#
# TMUX COMMAND LINE CHEAT SHEET
#
# > tmux ls          # list tmux sessions
# > tmux attach <n>  # attach to session [<N>]

# Options keys
unbind C-b                # disable default option key
set-option -g prefix C-a  # use same option key as Screen
set-option -g prefix `    # backtick alternative

# send prefix to other applications (ie Vim)
# send ` or C-a to Vim by pressing it *twice*
bind ` send-prefix
bind C-a send-prefix

# status line
set -g status-left-length 16

# unbind keys to eliminate vim conflict
unbind C-Up
unbind C-Down
unbind C-Left
unbind C-Right
unbind A-Up
unbind A-Down
unbind A-Left
unbind A-Right

# terminal settings
set-window-option -g xterm-keys on
set-window-option -g mode-keys vi
set-option -g status-keys vi
set-option -g status-position top
set-option -g default-terminal "screen-256color"

# copy/paste within Tmux
unbind n
unbind p
# bind -t vi-copy v begin-selection  # in copy mode
# bind -t vi-copy y copy-selection   # in copy mode
# bind -t vi-copy V rectangle-toggle # in copy mode
# bind -t vi-copy Y copy-end-of-line # in copy mode
bind p paste-buffer                # in normal mode

# copy/paste between tmux and X11
bind C-c run "tmux save-buffer - | xclip -i -sel clipboard"
bind C-v run "tmux set-buffer \"$(xclip -o -sel clipboard)\"; tmux paste-buffer"

# start window and pane numbering at '1'
set -g base-index 1
set -g pane-base-index 1

# kill windows and sessions
bind x kill-window      # kill the active window
bind X kill-session     # kill all windows

# Commands for creating split window panes
unbind %                                         # disable default key 
bind v split-window -h -c "#{pane_current_path}" # vertical split
bind s split-window -v -c "#{pane_current_path}" # horizontal split

# pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# tab navigation
bind Left  previous-window
bind Right next-window

# pane resizing
bind -n S-Up    resize-pane -U 2
bind -n S-Down  resize-pane -D 2
bind -n S-Right resize-pane -R 2
bind -n S-Left  resize-pane -L 2

# swap panes
unbind o
bind o rotate-window -D

# merge another window into current window
bind-key @ command-prompt -p "create pane from:"  "join-pane -s ':%%'"
bind-key % command-prompt -p "send pane to:"      "join-pane -t ':%%'"
# note: ! mapped to break-pane

# Do not notify upon activity in hidden windows
setw -g monitor-activity off
setw -g visual-activity off

# Swap New-Window and Clock Commands
unbind t
unbind c
bind c clock                                  # clock!
bind t new-window -c "#{pane_current_path}"   # new tab

# Renumber windows
unbind n
bind n move-window -r\; display "Renumbered tabs"

# Reload .tmux.conf
unbind r
bind r source-file ~/.tmux.conf\; display "Reloaded conf"

# xterm-title
set -g set-titles on
set -g set-titles-string '<#S:#I #W> #H'
set -g automatic-rename on

# Full color for Vim.

# Fix slow escape issue
# http://unix.stackexchange.com/questions/23138/esc-key-causes-a-small-delay-in-terminal-due-to-its-alt-behavior
set -sg escape-time 0

# Version-Specific Configs

if-shell "[[ `tm -V` == *2.0 ]]" 'source-file ~/.tmux_lte20.conf'
if-shell "[[ `tm -V` == *2.1 ]]" 'source-file ~/.tmux_gte21.conf'
if-shell "[[ `tm -V` == *2.2 ]]" 'source-file ~/.tmux_gte21.conf'
if-shell "[[ `tm -V` == *2.3 ]]" 'source-file ~/.tmux_gte21.conf'
